<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <link rel="manifest" href="/manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Creative Electronics Club">
  <link rel="apple-touch-icon" href="/images/icons/icon.png">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Creative Electronics Club</title>
  <meta name="codelab" content="your-first-pwa-v3">
  <link rel="stylesheet" type="text/css" href="/styles/inline.css">
  <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
  <link rel="icon" href="/images/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link href="https://fonts.googleapis.com/css?family=Google+Sans:400,500,700&amp;display=swap" rel="stylesheet">
  <meta name="description" content="Creative Electronics Club Dashboard">
  <meta name="theme-color" content="#FFFFFF" />

</head>
<body>

  <div id="app">
    <div>
      <div class="signout_dialog__1MICz signout_dialog">
        <dialog role="alertdialog" class="mdc-dialog">
          <div class="mdc-dialog__surface">
            <div class="dialog_body__33Tyf">
              <h3>Sign out?</h3>
              <p>All saved events remain synced to your account.</p>
            </div>
            <footer class="mdc-dialog__footer"><button class="cancel_btn__1O9sx mdc-dialog__footer__button mdc-dialog__footer__button--accept mdc-button mdc-ripple-upgraded">Not now</button><button class="signout_btn__29v2D mdc-dialog__footer__button mdc-button mdc-ripple-upgraded">Sign
                out</button></footer>
          </div>
          <div class="mdc-dialog__backdrop"></div>
        </dialog>
      </div>
      <div class="toolbar__3mfc2">
        <header class="topappbar mdc-top-app-bar" top="true" style="top: -128px;">
          <div class="mdc-top-app-bar__row">
            <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start"><svg class="menu_icon__1BRa-">
                <g>
                  <path d="M4,18h16c0.55,0,1-0.45,1-1v0c0-0.55-0.45-1-1-1H4c-0.55,0-1,0.45-1,1v0C3,17.55,3.45,18,4,18z M4,13h16c0.55,0,1-0.45,1-1 v0c0-0.55-0.45-1-1-1H4c-0.55,0-1,0.45-1,1v0C3,12.55,3.45,13,4,13z M3,7L3,7c0,0.55,0.45,1,1,1h16c0.55,0,1-0.45,1-1v0 c0-0.55-0.45-1-1-1H4C3.45,6,3,6.45,3,7z"></path>
                </g>
              </svg></section>
            <div class="mobile_title__1aQcX"></div>
            <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end">
              <img class="userImage" crossorigin="anonymous" src="" style="display: none;" onClick="firebase.auth().signOut()">
              <div class="install_btn" id="butInstallMobile" hidden>Install</div>
              <div class="signin_btn__1BOwZ" onclick="googleSignIn()" id="signinbutton">Sign In</div>

            </section>
          </div>
        </header>
      </div>
      <div class="mdc-drawer-container">
        <aside id="sidedrawer" class="mdc-drawer mdc-drawer--modal" modal="true">
          <div class="mdc-drawer__content">
            <nav class="mdc-list">
              <div class="drawer_toolbar__1VrbX">
                <div class="logo_container__vcinV"><img src="assets/devfest19-logo.svg"></div>
                <h2>Creative Electronics Club</h2>
              </div>
              <div class="drawer_nav__K2TXA"><a onclick="changeContent(0)" href="/" class="">Home</a><a onclick="changeContent(1)" class="">Controls</a>
                <!-- <a onclick="changeContent(2)" class="">FAQ</a><a onclick="changeContent(3)" class="">Schedule</a><a onclick="changeContent(4)">Speakers</a><a onclick="changeContent(6)" class="">Map</a> -->
              </div>
            </nav>
          </div>
        </aside>
        <div class="mdc-drawer-scrim"></div>
      </div>
      <div class="desktop_toolbar__101bi">
        <div class="install_btn" id="butInstallDesktop" hidden>Install</div>
        <div class="signin_btn__1BOwZ" onclick="googleSignIn()" id="signinbutton">Sign In</div>
        <img class="userImage" crossorigin="anonymous" src="" style="display: none;" onClick="firebase.auth().signOut()">
      </div>
      <div class="navbar__2X9cA">
        <nav><a class="nav_item__3KeIu active__2hWDy" onclick="changeContent(0)" id="nav0">
            <div><svg>
                <path fill="none" d="M0 0h24v24H0V0z"></path>
                <path d="M12 5.69l5 4.5V18h-2v-6H9v6H7v-7.81l5-4.5M12 3L2 12h3v8h6v-6h2v6h6v-8h3L12 3z"></path>
              </svg><svg active="true">
                <path fill="none" d="M0 0h24v24H0V0z"></path>
                <path d="M12 3L2 12h3v8h6v-6h2v6h6v-8h3L12 3zm5 15h-2v-6H9v6H7v-7.81l5-4.5 5 4.5V18z"></path>
                <path opacity=".3" d="M7 10.19V18h2v-6h6v6h2v-7.81l-5-4.5z"></path>
              </svg></div><span>Home</span>
          </a><a class="nav_item__3KeIu" onclick="changeContent(1)" id="nav1">
            <div><svg>
                <path fill="none" d="M0 0h24v24H0V0z"></path>
                <path d="M3 5h10v2H3zm4 6H3v2h4v2h2V9H7zm6 4h-2v6h2v-2h8v-2h-8zM3 17h6v2H3zm8-6h10v2H11zm6-8h-2v6h2V7h4V5h-4z"></path>
              </svg><svg active="true">
                <path fill="none" d="M0 0h24v24H0V0z"></path>
                <path d="M3 5h10v2H3zm4 6H3v2h4v2h2V9H7zm6 4h-2v6h2v-2h8v-2h-8zM3 17h6v2H3zm8-6h10v2H11zm6-8h-2v6h2V7h4V5h-4z"></path>
              </svg></div><span>Controls</span>
          </a>
          <!-- <a class="nav_item__3KeIu" onclick="changeContent(2)" id="nav2">
            <div><svg>
                <path fill="none" d="M0 0h24v24H0V0z"></path>
                <circle opacity="0.3" cx="9" cy="8" r="2"/>
            		<path opacity="0.3" d="M9,15c-2.7,0-5.8,1.29-6,2.01L3,18h12v-1C14.8,16.29,11.7,15,9,15z"/>
            		<path d="M16.67,13.13C18.04,14.06,19,15.32,19,17v3h4v-3C23,14.82,19.43,13.53,16.67,13.13z"/>
            		<path d="M15,12c2.21,0,4-1.79,4-4c0-2.21-1.79-4-4-4c-0.47,0-0.91,0.1-1.33,0.24C14.5,5.27,15,6.58,15,8s-0.5,2.73-1.33,3.76    C14.09,11.9,14.53,12,15,12z"/>
            		<path d="M9,12c2.21,0,4-1.79,4-4c0-2.21-1.79-4-4-4S5,5.79,5,8C5,10.21,6.79,12,9,12z M9,6c1.1,0,2,0.9,2,2c0,1.1-0.9,2-2,2    S7,9.1,7,8C7,6.9,7.9,6,9,6z"/>
            		<path d="M9,13c-2.67,0-8,1.34-8,4v3h16v-3C17,14.34,11.67,13,9,13z M15,18H3l0-0.99C3.2,16.29,6.3,15,9,15s5.8,1.29,6,2V18z"/>
              </svg><svg active="true">
                <path fill="none" d="M0 0h24v24H0V0z"></path>
                <circle opacity="0.3" cx="9" cy="8" r="2"/>
            		<path opacity="0.3" d="M9,15c-2.7,0-5.8,1.29-6,2.01L3,18h12v-1C14.8,16.29,11.7,15,9,15z"/>
            		<path d="M16.67,13.13C18.04,14.06,19,15.32,19,17v3h4v-3C23,14.82,19.43,13.53,16.67,13.13z"/>
            		<path d="M15,12c2.21,0,4-1.79,4-4c0-2.21-1.79-4-4-4c-0.47,0-0.91,0.1-1.33,0.24C14.5,5.27,15,6.58,15,8s-0.5,2.73-1.33,3.76    C14.09,11.9,14.53,12,15,12z"/>
            		<path d="M9,12c2.21,0,4-1.79,4-4c0-2.21-1.79-4-4-4S5,5.79,5,8C5,10.21,6.79,12,9,12z M9,6c1.1,0,2,0.9,2,2c0,1.1-0.9,2-2,2    S7,9.1,7,8C7,6.9,7.9,6,9,6z"/>
            		<path d="M9,13c-2.67,0-8,1.34-8,4v3h16v-3C17,14.34,11.67,13,9,13z M15,18H3l0-0.99C3.2,16.29,6.3,15,9,15s5.8,1.29,6,2V18z"/>
              </svg></div><span>Admin</span>
          </a><a class="nav_item__3KeIu" onclick="changeContent(3)" id="nav3">
            <div><svg>
                <g>
                  <path d="M19,3h-1V2c0-0.55-0.45-1-1-1h0c-0.55,0-1,0.45-1,1v1H8V2c0-0.55-0.45-1-1-1h0C6.45,1,6,1.45,6,2v1H5 C3.89,3,3.01,3.9,3.01,5L3,19c0,1.1,0.89,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M18,19H6c-0.55,0-1-0.45-1-1V8h14v10 C19,18.55,18.55,19,18,19z M8,10h3c0.55,0,1,0.45,1,1v3c0,0.55-0.45,1-1,1H8c-0.55,0-1-0.45-1-1v-3C7,10.45,7.45,10,8,10z"></path>
                </g>
              </svg><svg active="true">
                <path fill="none" d="M0 0h24v24H0V0z"></path>
                <path opacity=".3" d="M19,3h-1V2c0-0.55-0.45-1-1-1h0c-0.55,0-1,0.45-1,1v1H8V2c0-0.55-0.45-1-1-1h0C6.45,1,6,1.45,6,2v1H5 C3.89,3,3.01,3.9,3.01,5L3,19c0,1.1,0.89,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M18,19H6c-0.55,0-1-0.45-1-1V8h14v10 C19,18.55,18.55,19,18,19z M8,10h3c0.55,0,1,0.45,1,1v3c0,0.55-0.45,1-1,1H8c-0.55,0-1-0.45-1-1v-3C7,10.45,7.45,10,8,10z"></path>
                <path d="M19,3h-1V2c0-0.55-0.45-1-1-1h0c-0.55,0-1,0.45-1,1v1H8V2c0-0.55-0.45-1-1-1h0C6.45,1,6,1.45,6,2v1H5 C3.89,3,3.01,3.9,3.01,5L3,19c0,1.1,0.89,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M18,19H6c-0.55,0-1-0.45-1-1V8h14v10 C19,18.55,18.55,19,18,19z M8,10h3c0.55,0,1,0.45,1,1v3c0,0.55-0.45,1-1,1H8c-0.55,0-1-0.45-1-1v-3C7,10.45,7.45,10,8,10z"></path>
              </svg></div><span>Schedule</span>
          </a><a class="nav_item__3KeIu" onclick="changeContent(4)" id="nav4">
            <div><svg>
                <g>
                  <path d="M16,11c1.66,0,2.99-1.34,2.99-3c0-1.66-1.33-3-2.99-3s-3,1.34-3,3C13,9.66,14.34,11,16,11z"></path>
                  <path d="M8,11c1.66,0,2.99-1.34,2.99-3c0-1.66-1.33-3-2.99-3S5,6.34,5,8C5,9.66,6.34,11,8,11z"></path>
                  <path d="M8,13c-2.33,0-7,1.17-7,3.5V18c0,0.55,0.45,1,1,1h12c0.55,0,1-0.45,1-1v-1.5C15,14.17,10.33,13,8,13z"></path>
                  <path d="M16,13c-0.29,0-0.62,0.02-0.97,0.05c0.02,0.01,0.03,0.03,0.04,0.04C16.21,13.92,17,15.03,17,16.5V18 c0,0.35-0.07,0.69-0.18,1H22c0.55,0,1-0.45,1-1v-1.5C23,14.17,18.33,13,16,13z"></path>
                </g>
              </svg><svg active="true">
                <g>
                  <path d="M16,11c1.66,0,2.99-1.34,2.99-3c0-1.66-1.33-3-2.99-3s-3,1.34-3,3C13,9.66,14.34,11,16,11z"></path>
                  <path d="M8,11c1.66,0,2.99-1.34,2.99-3c0-1.66-1.33-3-2.99-3S5,6.34,5,8C5,9.66,6.34,11,8,11z"></path>
                  <path d="M8,13c-2.33,0-7,1.17-7,3.5V18c0,0.55,0.45,1,1,1h12c0.55,0,1-0.45,1-1v-1.5C15,14.17,10.33,13,8,13z"></path>
                  <path d="M16,13c-0.29,0-0.62,0.02-0.97,0.05c0.02,0.01,0.03,0.03,0.04,0.04C16.21,13.92,17,15.03,17,16.5V18 c0,0.35-0.07,0.69-0.18,1H22c0.55,0,1-0.45,1-1v-1.5C23,14.17,18.33,13,16,13z"></path>
                </g>
              </svg></div><span>Speakers</span>
          </a><a class="nav_item__3KeIu" onclick="changeContent(5)" id="nav5">
            <div><svg>
                <path fill="none" d="M0 0h24v24H0V0z"></path>
                <path d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM10 5.47l4 1.4v11.66l-4-1.4V5.47zm-5 .99l3-1.01v11.7l-3 1.16V6.46zm14 11.08l-3 1.01V6.86l3-1.16v11.84z"></path>
              </svg><svg active="true">
                <path fill="none" d="M0 0h24v24H0V0z"></path>
                <path opacity=".3" d="M5 18.31l3-1.16V5.45L5 6.46zm11 .24l3-1.01V5.69l-3 1.17z"></path>
                <path d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM8 17.15l-3 1.16V6.46l3-1.01v11.7zm6 1.38l-4-1.4V5.47l4 1.4v11.66zm5-.99l-3 1.01V6.86l3-1.16v11.84z"></path>
              </svg></div><span>Map</span>
          </a> -->
          <div class="line__2i-JQ"></div>
        </nav>
      </div>
    </div>
    <div id="content">

    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="/scripts/luxon-1.11.4.js"></script>
  <script src="/scripts/app.js"></script>
  <script src="/scripts/install.js"></script>
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-analytics.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-firestore.js"></script>
  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js')
          .then((reg) => {
            console.log('Service worker registered.', reg);
          });
    });
  }
  </script>
  <script>
    var currentUser;
    var currentPage = 0;
    var firebaseConfig = {
      apiKey: "AIzaSyCpWeoGzDrwoJjnsjBnDu-vVUt6LfGHyxk",
      authDomain: "cecdbfirebase.firebaseapp.com",
      databaseURL: "https://cecdbfirebase.firebaseio.com",
      projectId: "cecdbfirebase",
      storageBucket: "cecdbfirebase.appspot.com",
      messagingSenderId: "497574235952",
      appId: "1:497574235952:web:0d606384593ee9dde802f5"
    };
    firebase.initializeApp(firebaseConfig);

    var provider = new firebase.auth.GoogleAuthProvider();
    var db = firebase.firestore();
    function googleSignIn(){
      firebase.auth().signInWithPopup(provider).then(function(result) {
        var token = result.credential.accessToken;
        user = result.user;
        currentUser = user;
        $('#userGoogleName').html(user.displayName);
        $('.userImage').each(function(){
        	$(this).attr("src",user.photoURL);
          $(this).show();
        });
        console.log(user)
        $('.signin_btn__1BOwZ').each(function(){
          $(this).hide();
        });
        changeContent(currentPage)

      }).catch(function(error) {
        // Handle Errors here.
        var errorCode = error.code;
        var errorMessage = error.message;
        // The email of the user's account used.
        var email = error.email;
        // The firebase.auth.AuthCredential type that was used.
        var credential = error.credential;
        // ...
      });
    }
    firebase.auth().onAuthStateChanged(function(user) {
      if (user) {
        currentUser = user;
        $('#userGoogleName').html(user.displayName);
        $('.userImage').each(function(){
          $(this).attr("src",user.photoURL);
          $(this).show();
        });
        console.log(user)
        $('.signin_btn__1BOwZ').each(function(){
          $(this).hide();
        });
        changeContent(currentPage)
      } else {
        $('.userImage').each(function(){
          $(this).hide();
        });
        $('.signin_btn__1BOwZ').each(function(){
          $(this).show();
        });
      }
    });
  </script>
  <script>
    function changeContent(page){
      sideDrawer.open = false;
      $('#nav'+currentPage).removeClass('active__2hWDy');
      $('#nav'+page).addClass('active__2hWDy');
      currentPage = page;
      if(currentUser != null){
        $('#content').html('<div style="width:100%;height:100%;text-align:center; margin:80px 0px 0px 0px"><div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div></div>');
        window.history.pushState({"page":page},"Creative Electronics Club", pageToName(page));
        $.ajax({
          type: "GET",
          url: $(location).attr('origin')+'/'+ pageToName(page) + '.html',
          success: function(data) {
              $('#content').html(data);
              $.getScript("scripts/"+pageToName(page) + '.js');
              $('.mobile_title__1aQcX').html(pageToDisplayName(page));
          }
        });
      } else {
        $('#content').html('<div> <div class="hero__3FWBs hero"> <div class="heroText___ONUV"> <h2>You\'re Signed Out</h2> <p>Please sign in to proceed.</p> </div></div> </div> </div> ');
      }
    }

   if($(window).width() <= 768){
     $('.topappbar').css('top','0px')
   } else {
     $('.topappbar').css('top','-128px')
   }

   $( window ).resize(function() {
     if($(window).width() <= 768){
       $('.topappbar').css('top','0px')
     } else {
       $('.topappbar').css('top','-128px')
     }
    });

    const sideDrawer = new mdc.drawer.MDCDrawer(document.querySelector('#sidedrawer'));
    sideDrawer.toggle= function(){
      sideDrawer.open = !sideDrawer.open
    }

    $('.menu_icon__1BRa-').click(function(){
      sideDrawer.toggle();
    })

    function pageToName(page){
     switch(page){
       case 0: return 'home';
       case 1: return 'controls';
       case 2: return 'admin';
     }
    }

    function pageToDisplayName(page){
     switch(page){
       case 0: return '';
       case 1: return 'Makerspace Controls';
       case 2: return 'Admin Dashboard';
     }
    }

    switch((window.location.href).split('/')[3]){
      case '':changeContent(0);break;
      case 'home':changeContent(0);break;
      case 'controls':changeContent(1);break;
      case 'admin':changeContent(2);break;
      case '':changeContent(3);break;
      case '':changeContent(4);break;
      case '':changeContent(5);break;
    }

  </script>
  <script>

  var wsState;
  function connect() {
    ws = new WebSocket('ws://10.0.0.6:8080');
    ws.onopen = function() {
      wsState = true;
      ws.send(JSON.stringify({
        action: "requestState"
      }));
      wsInitialize();
    }

    ws.onclose = function(e) {
      console.log('Socket is closed. Reconnect will be attempted in 1 second.', e.reason);
      $('#loadconnection').show();
      $('.hideWhenConnect').each(function(){
        $(this).hide();
      })
      wsState = false;
      delete ws;
      setTimeout(function() {
        connect();
      }, 1000);
    };

    ws.onerror = function(err) {
      console.error('Socket encountered error:', err.message, 'Closing socket');
      ws.close();
    };
  }
  connect();
  </script>
</body>
</html>
